{"version":3,"sources":["webpack:///./src/components/home.vue?f228","webpack:///src/components/home.vue","webpack:///./src/components/home.vue?3ca8","webpack:///./src/components/home.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","onText","onFilter","attrs","_l","item","key","id","domProps","_s","carparkName","address","totalAvailableLots","_e","favorite","undefined","$event","_v","unfavorite","ref","infiniteId","infiniteHandler","slot","staticClass","staticRenderFns","components","CarparkFilter","carparkItem","Date","filterConfig","$store","getters","FILTER","mounted","PageNumber","methods","input","value","SearchQuery","cur","axios","get","params","then","response","Object","assign","data","changeType","$state","setTimeout","length","push","getUserFavorites","loaded","complete","dispatch","userFavorites","j","carparkId","index","getCarparkPos","$set","foundIndex","map","x","indexOf","success","component","VCard","VIcon","VList","VListItem","VListItemAction","VListItemActionText","VListItemContent","VListItemGroup","VListItemSubtitle","VListItemTitle"],"mappings":"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","file":"js/chunk-2d216d34.1536e375.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('CarparkFilter',{on:{\"change\":_vm.onText,\"clicked\":_vm.onFilter}}),_c('v-list',[_c('v-list-item-group',{attrs:{\"active-class\":\"blue--text\"}},[_vm._l((_vm.carparkItem),function(item){return [_c('v-list-item',{key:item.id},[[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.carparkName)}}),_c('v-list-item-subtitle',{domProps:{\"textContent\":_vm._s(item.address)}})],1),_c('v-list-item-action',[(item.totalAvailableLots != '-1')?_c('v-list-item-action-text',{domProps:{\"textContent\":_vm._s(item.totalAvailableLots)}}):_vm._e(),(item.favorite == false || item.favorite == undefined)?_c('v-icon',{attrs:{\"color\":\"grey lighten-1\"},on:{\"click\":function($event){return _vm.favorite(item)}}},[_vm._v(\"mdi-heart-outline\")]):_c('v-icon',{attrs:{\"color\":\"red\"},on:{\"click\":function($event){return _vm.unfavorite(item)}}},[_vm._v(\"mdi-heart\")])],1)]],2)]}),_c('infinite-loading',{ref:\"InfiniteLoading\",attrs:{\"spinner\":\"spiral\",\"identifier\":_vm.infiniteId},on:{\"infinite\":_vm.infiniteHandler}},[_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"},[_vm._v(\"-- End of Carpark List --\")]),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"},[_vm._v(\"-- No Carpark --\")])]),_c('a',{staticClass:\"btn btn-primary btn-lg back-to-top\",attrs:{\"id\":\"back-to-top\",\"href\":\"#\",\"role\":\"button\"}},[_c('span',{staticClass:\"fas fa-arrow-up\"})])],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card>\n    <CarparkFilter @change=\"onText\" @clicked=\"onFilter\"></CarparkFilter>\n    <v-list>\n      <v-list-item-group active-class=\"blue--text\">\n        <template v-for=\"item in carparkItem\">\n          <v-list-item :key=\"item.id\">\n            <template>\n              <v-list-item-content>\n                <v-list-item-title v-text=\"item.carparkName\"></v-list-item-title>\n                <v-list-item-subtitle v-text=\"item.address\"></v-list-item-subtitle>\n              </v-list-item-content>\n              <v-list-item-action>\n                <v-list-item-action-text\n                  v-if=\"item.totalAvailableLots != '-1'\"\n                  v-text=\"item.totalAvailableLots\"\n                ></v-list-item-action-text>\n                <v-icon\n                  v-if=\"item.favorite == false || item.favorite == undefined\"\n                  @click=\"favorite(item)\"\n                  color=\"grey lighten-1\"\n                >mdi-heart-outline</v-icon>\n                <v-icon v-else @click=\"unfavorite(item)\" color=\"red\">mdi-heart</v-icon>\n              </v-list-item-action>\n            </template>\n          </v-list-item>\n        </template>\n        <infinite-loading\n          spinner=\"spiral\"\n          ref=\"InfiniteLoading\"\n          :identifier=\"infiniteId\"\n          @infinite=\"infiniteHandler\"\n        >\n          <div slot=\"no-more\">-- End of Carpark List --</div>\n          <div slot=\"no-results\">-- No Carpark --</div>\n        </infinite-loading>\n        <a id=\"back-to-top\" href=\"#\" class=\"btn btn-primary btn-lg back-to-top\" role=\"button\">\n          <span class=\"fas fa-arrow-up\"></span>\n        </a>\n      </v-list-item-group>\n    </v-list>\n  </v-card>\n</template>\n\n<script>\nimport CarparkFilter from \"./utils/filter\";\nexport default {\n  components: {\n    CarparkFilter\n  },\n  data() {\n    return {\n      carparkItem: [],\n      infiniteId: +new Date(),\n      filterConfig: this.$store.getters.FILTER\n    };\n  },\n  mounted: function() {\n    //reset page number back to 1\n    this.filterConfig.PageNumber = 1;\n  },\n  methods: {\n    onText(input) {\n      var value = {\n        SearchQuery: input\n      };\n      let cur = this;\n      this.axios\n        .get(\"https://parkingslotapi.azurewebsites.net/api/carpark\", {\n          params: value\n        })\n        .then(function(response) {\n          cur.carparkItem = Object.assign({}, response.data);\n        });\n    },\n    onFilter(filterConfig) {\n      //Pass the updated filter config\n      this.filterConfig = filterConfig;\n      this.changeType();\n    },\n    infiniteHandler($state) {\n      this.axios\n        .get(\"https://parkingslotapi.azurewebsites.net/api/carpark\", {\n          params: this.filterConfig\n        })\n        .then(({ data }) => {\n          setTimeout(() => {\n            if (data.length) {\n              this.filterConfig.PageNumber += 1;\n              this.carparkItem.push(...data);\n              //Check for user favorites for every page\n              this.getUserFavorites();\n              $state.loaded();\n            } else {\n              $state.complete();\n            }\n          }, 500);\n        });\n    },\n    changeType() {\n      this.filterConfig.PageNumber = 1;\n      this.carparkItem = [];\n      this.infiniteId += 1;\n    },\n    getUserFavorites: function() {\n      this.$store.dispatch(\"GETFAVORITES\").then(userFavorites => {\n        for (var j = 0; j < userFavorites.data.length; j++) {\n          var id = userFavorites.data[j].carparkId;\n          var index = this.getCarparkPos(id);\n          if (index != -1) {\n            var item = this.carparkItem[index];\n            item.favorite = true;\n            this.$set(this.carparkItem, index, item);\n          }\n        }\n      });\n    },\n    getCarparkPos(id) {\n      var foundIndex = this.carparkItem\n        .map(function(x) {\n          return x.id;\n        })\n        .indexOf(id);\n      return foundIndex;\n    },\n    favorite: function(item) {\n      this.$store.dispatch(\"ADDFAVORITES\", item.id).then(success => {\n        if (success) {\n          var index = this.getCarparkPos(item.id);\n          item.favorite = true;\n          this.$set(this.carparkItem, index, item);\n        }\n      });\n    },\n    unfavorite: function(item) {\n      this.$store.dispatch(\"DELETEFAVORITE\", item.id).then(success => {\n        if (success) {\n          var index = this.getCarparkPos(item.id);\n          item.favorite = false;\n          this.$set(this.carparkItem, index, item);\n        }\n      });\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=9cff01a8&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemActionText } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VCard,VIcon,VList,VListItem,VListItemAction,VListItemActionText,VListItemContent,VListItemGroup,VListItemSubtitle,VListItemTitle})\n"],"sourceRoot":""}